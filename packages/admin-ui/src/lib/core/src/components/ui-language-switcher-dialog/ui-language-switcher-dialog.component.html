<ng-template vdrDialogTitle>{{ 'common.select-display-language' | translate }}</ng-template>

<ng-container *ngIf="isLoading">
    <div class="w-[400px] h-40 flex justify-center items-center">
        <hlm-spinner />
    </div>
</ng-container>

<ng-container *ngIf="!isLoading">
    <div class="w-[500px]">
        <div class="space-y-2 pb-4 border-b border-border">
            <vdr-form-field [label]="'common.language' | translate">
                <hlm-select
                    name="options"
                    placeholder="Select language"
                    [(ngModel)]="currentLanguage"
                    (ngModelChange)="updatePreviewLocale()"
                >
                    <hlm-select-trigger class="w-full">
                        <hlm-select-value />
                    </hlm-select-trigger>
                    <hlm-select-content>
                        <hlm-option *ngFor="let code of availableLanguages | sort" [value]="code">
                            {{ code | uppercase }} ({{ code | localeLanguageName }})
                        </hlm-option>
                    </hlm-select-content>
                </hlm-select>
            </vdr-form-field>
            <vdr-form-field [label]="'common.locale' | translate">
                <hlm-select
                    [(ngModel)]="currentLocale"
                    (ngModelChange)="updatePreviewLocale()"
                    [placeholder]="'common.browser-default' | translate"
                >
                    <hlm-select-trigger class="w-full">
                        <hlm-select-value />
                    </hlm-select-trigger>
                    <hlm-select-content>
                        <hlm-option *ngFor="let item of availableLocales" [value]="item">
                            {{ item }} ({{ item | localeRegionName }})
                        </hlm-option>
                    </hlm-select-content>
                </hlm-select>
            </vdr-form-field>
            <vdr-form-field [label]="'common.currency' | translate">
                <hlm-select
                    [(ngModel)]="selectedCurrencyCode"
                    [placeholder]="'common.browser-default' | translate"
                >
                    <hlm-select-trigger class="w-full">
                        <hlm-select-value />
                    </hlm-select-trigger>
                    <hlm-select-content>
                        <hlm-option *ngFor="let code of availableCurrencyCodes | sort" [value]="code">
                            {{ code | uppercase }} ({{ code | localeCurrencyName: 'full' : previewLocale }})
                        </hlm-option>
                    </hlm-select-content>
                </hlm-select>
            </vdr-form-field>
        </div>
        <div class="pt-4">
            <div class="flex items-center justify-start gap-2 mb-4">
                <span>{{ 'common.sample-formatting' | translate }}:</span>
                <span class="font-semibold">{{ previewLocale | localeLanguageName: previewLocale }}</span>
            </div>
            <vdr-labeled-data [label]="'common.medium-date' | translate">
                {{ now | localeDate: 'medium' : previewLocale }}
            </vdr-labeled-data>
            <vdr-labeled-data [label]="'common.short-date' | translate">
                {{ now | localeDate: 'short' : previewLocale }}
            </vdr-labeled-data>
            <vdr-labeled-data [label]="'common.price' | translate">
                {{ 12345 | localeCurrency: selectedCurrencyCode : previewLocale }}
            </vdr-labeled-data>
        </div>
    </div>
</ng-container>

<ng-template vdrDialogButtons>
    <button hlmBtn type="button" (click)="cancel()">{{ 'common.cancel' | translate }}</button>
    <button hlmBtn type="submit" (click)="setLanguage()" variant="accent">
        {{ 'common.set-language' | translate }}
    </button>
</ng-template>
