<ng-container>
    <button
        class="w-full justify-between text-muted-foreground"
        hlmBtn
        variant="outline"
        [brnMenuTriggerFor]="channelSwitcher"
        size="sm"
    >
        <span class="flex items-center">
            <vdr-channel-badge
                class="mr-2 flex items-center"
                size="sm"
                [channelCode]="activeChannelCode$ | async"
            ></vdr-channel-badge>
            {{ activeChannelCode$ | async | channelCodeToLabel | translate }}
        </span>
        <ng-icon class="ml-1" hlm name="lucideEllipsisVertical" size="sm"></ng-icon>
    </button>
    <ng-template #channelSwitcher>
        <hlm-menu>
            <div hlmMenuItem *ngIf="((channelCount$ | async) || 0) >= displayFilterThreshold">
                <input
                    hlmInput
                    [formControl]="filterControl"
                    type="text"
                    [placeholder]="'common.filter' | translate"
                />
            </div>
            <button
                hlmMenuItem
                *ngFor="let channel of channels$ | async"
                (click)="setActiveChannel(channel.id)"
            >
                <vdr-channel-badge
                    class="flex items-center"
                    hlmMenuIcon
                    [channelCode]="channel.code"
                ></vdr-channel-badge>
                {{ channel.code | channelCodeToLabel | translate }}
            </button>
        </hlm-menu>
    </ng-template>
</ng-container>
