<ng-template vdrDialogTitle>{{ 'order.select-address' | translate }}</ng-template>

<hlm-tabs tab="" *ngIf="addresses$ | async as addresses">
    <hlm-tabs-list class="w-full grid grid-cols-2">
        <button hlmTabsTrigger="existingAddress">{{ 'order.existing-address' | translate }}</button>
        <button hlmTabsTrigger="createNewAddress">{{ 'customer.create-new-address' | translate }}</button>
    </hlm-tabs-list>
    <div hlmTabsContent="existingAddress" *ngIf="customerId && addresses.length">
        <vdr-radio-card-fieldset
            class="block mt-4"
            [idFn]="addressIdFn"
            [selectedItemId]="selectedAddress && addressIdFn(selectedAddress)"
            (selectItem)="selectedAddress = $event"
        >
            <vdr-radio-card *ngFor="let address of addresses" [item]="address">
                <vdr-formatted-address [address]="address"></vdr-formatted-address>
            </vdr-radio-card>
        </vdr-radio-card-fieldset>
    </div>
    <div hlmTabsContent="createNewAddress">
        <vdr-address-form
            [formGroup]="addressForm"
            [availableCountries]="availableCountries$ | async"
        ></vdr-address-form>
    </div>
</hlm-tabs>

<ng-template vdrDialogButtons>
    <button type="button" class="btn" (click)="cancel()">{{ 'common.cancel' | translate }}</button>
    <button
        type="submit"
        (click)="select()"
        [disabled]="(useExisting && !selectedAddress) || (createNew && addressForm.invalid)"
        class="btn btn-primary"
    >
        {{ 'common.okay' | translate }}
    </button>
</ng-template>
